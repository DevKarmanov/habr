<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <link rel="stylesheet" href="https://code.jquery.com/ui/1.13.3/themes/base/jquery-ui.css">
    <link rel="stylesheet" href="/css/OtherInformationForm.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
    <script src="https://code.jquery.com/ui/1.13.3/jquery-ui.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
    <title>Title</title>

</head>
<body>
<!-- Navbar-->
<header class="header">
    <nav class="navbar navbar-expand-lg navbar-light py-3">
        <div class="container">
            <!-- Navbar Brand -->
        </div>
    </nav>
</header>


<div class="container">
    <div class="row py-5 mt-4 align-items-center">
        <!-- For Demo Purpose -->
        <div class="col-md-5 pr-lg-5 mb-5 mb-md-0">
            <img src="/images/oprosnik.jpg" alt="" class="img-fluid mb-3 d-none d-md-block">
            <h1>–î–∞–≤–∞–π—Ç–µ –∏–∑–º–µ–Ω–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∞—Å</h1>
            <p class="font-italic text-muted mb-0">–í—ã –≤—Å–µ–≥–¥–∞ —Å–º–æ–∂–µ—Ç–µ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∏ –∏–∑–º–µ–Ω–∏—Ç—å —á—Ç–æ-—Ç–æ –µ—â–µ</p>
        </div>

        <div class="col-md-7 col-lg-6 ml-auto">
            <div class="row">
                <form th:action="@{/api/resume_v1/profile/{name}/edit-private-information/patch(name=${PathUserName})}" id="informationForm" enctype="multipart/form-data">
                    <input type="hidden" name="PathUserName" th:value="${PathUserName}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}"/>
                    <p th:if="${errorMessage}" th:text="${errorMessage}" class="error text-danger text-center"></p>

                    <div class="input-group col-lg-6 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-person-fill"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.name}" id="login" type="text" name="login" placeholder="–í–∞—à –ª–æ–≥–∏–Ω" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0">
                    </div>

                    <div class="input-group col-lg-6 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-person-fill"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.firstname}" id="firstName" type="text" name="firstname" placeholder="–ò–º—è" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0">
                    </div>


                    <div class="input-group col-lg-6 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-person-fill"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.lastname}" id="lastName" type="text" name="lastname" placeholder="–§–∞–º–∏–ª–∏—è" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0">
                    </div>

                    <div class="input-group col-lg-12 mb-4">
                        <textarea th:text="${UserInfo.description}" id="description" type="text" name="description" placeholder="–û–ø–∏—à–∏—Ç–µ —Å–µ–±—è" class="form-control bg-white border-left-0 border-md"></textarea>
                    </div>

                    <div class="input-group col-lg-6 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-envelope-fill"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.email}" id="email" type="text" name="email" placeholder="Email" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0">
                    </div>

                    <div class="input-group col-lg-12 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-globe-asia-australia"></i>
                                </span>
                        </div>
                        <select id="country" name="country" class="custom-select form-control bg-white border-left-0 flex-grow-1 border-start-0 border-md h-100 font-weight-bold text-muted">
                            <option th:text="${'–°–µ–π—á–∞—Å –≤—ã–±—Ä–∞–Ω–∞: '+UserInfo.country}" th:value="${UserInfo.country}" disabled selected hidden>–í—ã–±–µ—Ä–∏—Ç–µ —Å—Ç—Ä–∞–Ω—É</option>
                            <option th:if="${!UserInfo.country.equals('RU')}" value="RU">–†–æ—Å—Å–∏—è üá∑üá∫</option>
                            <option th:if="${!UserInfo.country.equals('BY')}" value="BY">–ë–µ–ª–∞—Ä—É—Å—å üáßüáæ</option>
                            <option th:if="${!UserInfo.country.equals('KZ')}" value="KZ">–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω üá∞üáø</option>
                            <option th:if="${!UserInfo.country.equals('UA')}" value="UA">–£–∫—Ä–∞–∏–Ω–∞ üá∫üá¶</option>
                            <option th:if="${!UserInfo.country.equals('US')}" value="US">–°–®–ê üá∫üá∏</option>
                            <option th:if="${!UserInfo.country.equals('CN')}" value="CN">–ö–∏—Ç–∞–π üá®üá≥</option>
                            <option th:if="${!UserInfo.country.equals('DE')}" value="DE">–ì–µ—Ä–º–∞–Ω–∏—è üá©üá™</option>
                            <option th:if="${!UserInfo.country.equals('FR')}" value="FR">–§—Ä–∞–Ω—Ü–∏—è üá´üá∑</option>
                            <!-- –î–æ–±–∞–≤—å—Ç–µ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω—ã –ø–æ –≤–∞—à–µ–º—É –≤—ã–±–æ—Ä—É -->
                            <option th:if="${!UserInfo.country.equals('XX')}" value="XX">–ù–µ —Ö–æ—á—É —É–∫–∞–∑—ã–≤–∞—Ç—å</option>
                        </select>
                    </div>

                    <div class="input-group col-lg-12 mb-4 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-controller"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.roleInCommand}" type="text" id="jobInput" name="jobtitle" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0" placeholder="–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é –æ—Å–Ω–æ–≤–Ω—É—é —Ä–æ–ª—å –≤ –∫–æ–º–∞–Ω–¥–µ">
                    </div>

                    <div class="input-group col-lg-12 mb-2 align-items-center">
                        <div class="input-group-prepend">
                                <span class="input-group-text bg-white px-4 border-md border-end-0 rounded-end-0">
                                    <i class="bi bi-bookmark-plus-fill"></i>
                                </span>
                        </div>
                        <input th:value="${UserInfo.skills}" type="text" id="skillsInput" name="skillsInput" class="form-control bg-white border-left-0 border-md flex-grow-1 border-start-0" placeholder="Java, C++, Python, HTML ">
                        <div class="autocomplete-items"></div>
                    </div>

                    <label for="formFileMultiple" class="form-label">–ò–∑–º–µ–Ω–∏—Ç–µ —Å–≤–æ–π –∞–≤–∞—Ç–∞—Ä</label>
                    <input class="form-control mb-3" type="file" name="userImage" id="formFileMultiple" accept=".jpg, .jpeg, .png" />

                    <div class="row">
                        <div class="col-lg-6 mb-0">
                            <input type="submit" class="btn btn-primary btn-block py-2" value="–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Å–µ–±–µ">
                        </div>
                        <div class="col-lg-6 mb-0">
                            <a th:href="@{/api/resume_v1/profile/{name}(name=${MyUserName})}" class="btn btn-danger btn-block py-2">
                                –ù–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω—è—Ç—å
                            </a>
                        </div>
                    </div>
                </form>

            </div>
        </div>
    </div>
</div>

<!--–ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å–æ–≤–µ—Ç–∞-->
<div th:if="${!UserSettings.dontShowHint}" class="modal fade" id="hintModal" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="hintLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="hintLabel">–ù–µ–±–æ–ª—å—à–∞—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                –ü—Ä–∏ —Å–º–µ–Ω–µ –ª–æ–≥–∏–Ω–∞ –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è <strong class="text-danger">–ø–µ—Ä–µ–∑–∞–π—Ç–∏</strong>
                <div class="form-check mt-3">
                    <input class="form-check-input" type="checkbox" value="" id="disableNotificationCheckbox">
                    <label class="form-check-label"  for="disableNotificationCheckbox">
                        –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞ —Å–∞–π—Ç–µ
                    </label>
                    <input type="hidden" name="pathName" th:value="${PathUserName}">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}">
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-danger" data-bs-dismiss="modal">–ü–æ–Ω—è–ª</button>
            </div>
        </div>
    </div>
</div>

</body>
<script src="/js/OtherInformationFormChange.js"></script>
<script>
    // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
    function showMessage() {
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –∞—Ç—Ä–∏–±—É—Ç "error" –≤ URL-–∞–¥—Ä–µ—Å–µ
        const urlParams = new URLSearchParams(window.location.search);
        if (!urlParams.has('error')) {
            // –ï—Å–ª–∏ –∞—Ç—Ä–∏–±—É—Ç "error" –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, —Ç–æ —Å–æ–∑–¥–∞–µ–º —ç–∫–∑–µ–º–ø–ª—è—Ä –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ
            const rulesModal = new bootstrap.Modal(document.getElementById('hintModal'));
            rulesModal.show();
        }
    }

    // –í—ã–∑—ã–≤–∞–µ–º —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è –ø–æ–∫–∞–∑–∞ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
    showMessage();
</script>
<script>
    $(document).ready(function(){
        $('#hintModal .btn-danger').click(function(e){
            e.preventDefault();
            var isChecked = $('#disableNotificationCheckbox').is(':checked');
            if (!isChecked) {
                // –ï—Å–ª–∏ —á–µ–∫–±–æ–∫—Å –Ω–µ –æ—Ç–º–µ—á–µ–Ω, –ø—Ä–µ–∫—Ä–∞—â–∞–µ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏
                return;
            }
            var pathName = $('input[name="pathName"]').val();
            var csrfToken = $('input[name="_csrf"]').val();
            $.ajax({
                url: '/api/resume_v1/profile/' + pathName + '/set-hint-show',
                type: 'PATCH',
                headers: {
                    'X-CSRF-TOKEN': csrfToken
                },
                data: { hintValueSetting: isChecked },
                success: function(response) {
                    // –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                    alert("–î–æ–≥–æ–≤–æ—Ä–∏–ª–∏—Å—å, –±–æ–ª—å—à–µ –Ω–µ –ø–æ–∫–∞–∂–µ–ºüëå");
                },
                error: function(error) {
                    // –í—Å–ø–ª—ã–≤–∞—é—â–µ–µ –æ–∫–Ω–æ –¥–ª—è –Ω–µ—É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
                    alert("–ö–∞–∫–∞—è-—Ç–æ –æ—à–∏–±–∫–∞‚ö†Ô∏è. –ü—Ä–æ—Å–∏–º –≤–∞—Å –ø–æ—Ç–µ—Ä–ø–µ—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É –Ω–µ–º–Ω–æ–≥–æ. –ü—Ä–∏–Ω–æ—Å–∏–º —Å–≤–æ–∏ –∏–∑–≤–∏–Ω–µ–Ω–∏—è");
                }
            });
        });
    });

</script>
</html>